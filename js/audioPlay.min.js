/*!
 * =====================================================
 * company:http://www.witgo.cn/
 * author:zhailulu  date: 2016-08-12
 * =====================================================
 */
!function(a){a.fn.audioPlay=function(b){var c,d=a(this)[0],c=a.extend({},a.fn.audioPlay.defaults,b),e=a("#"+c.canvasId)[0],f=c.playClass,g=c.pauseClass;audio={drawCircle:function(a,b){var c,d=document.documentElement.clientWidth,e=Math.floor(80*d/750),f=.8*e*.5;a.setAttribute("width",e+"px"),a.setAttribute("height",e+"px"),a.getContext&&(c=a.getContext("2d")),c.translate(e/2,e/2),c.beginPath(),c.arc(0,0,f,0,2*Math.PI,!1),c.lineWidth=5,c.strokeStyle="#ddd",c.stroke(),c.beginPath(),c.arc(0,0,f,3*Math.PI/2,3*Math.PI/2+2*Math.PI/180+b*Math.PI*2,!1),c.lineWidth=5,c.strokeStyle="#ea8010",c.stroke()},setProgress:function(){if(!isNaN(music.duration)){var a=music.currentTime/music.duration;1==a&&(a=0),audio.drawCircle(e,a)}}},d&&(d.addEventListener("timeupdate",function(){audio.setProgress()},!1),d.addEventListener("ended",function(){a("#"+c.canvasId).removeClass(f).addClass(g)}),a("#"+c.canvasId).on("click",function(){a(this).hasClass(f)?(d.play(),a(this).removeClass(f).addClass(g)):a(this).hasClass(g)&&(d.pause(),a(this).removeClass(g).addClass(f))}),audio.drawCircle(e,0),a("#"+c.canvasId).show())},a.fn.audioPlay.defaults={canvasId:"canvas",playClass:"canvas-play",pauseClass:"canvas-pause"}}(Zepto);